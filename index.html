<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´æ•°æ®å¯è§†åŒ–å¹³å°</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 100%);
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* ä¸»é¢˜åˆ‡æ¢å™¨ */
        .theme-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
            align-items: center;
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        .theme-label {
            color: white;
            font-size: 0.9rem;
            margin-right: 5px;
        }

        .theme-btn {
            width: 32px;
            height: 32px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .theme-btn:hover {
            transform: scale(1.15);
            border-color: rgba(255,255,255,0.8);
        }

        .theme-btn.active {
            border-color: white;
            box-shadow: 0 0 0 3px rgba(255,255,255,0.3);
        }

        .theme-btn.blue { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .theme-btn.green { background: linear-gradient(135deg, #10b981, #059669); }
        .theme-btn.purple { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
        .theme-btn.orange { background: linear-gradient(135deg, #f97316, #ea580c); }
        .theme-btn.dark { background: linear-gradient(135deg, #1f2937, #111827); }

        /* ä¸»é¢˜æ ·å¼ */
        body.green-theme {
            background: #f0fdf4;
            color: #064e3b;
        }

        body.green-theme header {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        body.purple-theme {
            background: #faf5ff;
            color: #581c87;
        }

        body.purple-theme header {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        body.orange-theme {
            background: #fff7ed;
            color: #7c2d12;
        }

        body.orange-theme header {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        body.dark-theme {
            background: #0f172a;
            color: #f1f5f9;
        }

        body.dark-theme header {
            background: linear-gradient(135deg, #1e293b, #0f172a);
        }

        body.dark-theme .controls,
        body.dark-theme .data-editor,
        body.dark-theme .chart-container,
        body.dark-theme .modal-content {
            background: #1e293b;
            color: #f1f5f9;
            border-color: #334155;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
            border: 1px solid #e2e8f0;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            min-width: 150px;
        }

        label {
            font-weight: 600;
            color: inherit;
            font-size: 0.9rem;
        }

        select, input, button {
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            color: inherit;
            transition: all 0.3s ease;
        }

        select:hover, input:hover {
            border-color: #3b82f6;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        button {
            background: #3b82f6;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        /* æ•°æ®ç¼–è¾‘å™¨ */
        .data-editor {
            background: white;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .editor-tabs {
            display: flex;
            background: #f8fafc;
            border-bottom: 2px solid #e2e8f0;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-size: 1rem;
            color: inherit;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-btn:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: white;
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        /* å›¾è¡¨ç½‘æ ¼ */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .chart-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chart-title {
            font-weight: 600;
            font-size: 1.1rem;
            color: inherit;
        }

        .chart-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            background: #64748b;
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            min-width: 40px;
        }

        .action-btn:hover {
            background: #475569;
            transform: translateY(-1px);
        }

        .fullscreen-hint {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.8rem;
            color: #64748b;
            background: rgba(100, 116, 139, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .chart-container:hover .fullscreen-hint {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        /* å…¨å±æ¨¡å¼ */
        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            z-index: 9999;
            display: none;
            padding: 20px;
        }

        .fullscreen-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .fullscreen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        }

        .fullscreen-chart {
            flex: 1;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
        }

        .close-fullscreen {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .close-fullscreen:hover {
            background: rgba(255,255,255,0.3);
        }

        /* åˆ†ææ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease;
            border: 1px solid #e2e8f0;
        }

        .close {
            color: #64748b;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            line-height: 1;
        }

        .close:hover {
            color: #3b82f6;
        }

        .analysis-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .analysis-section {
            margin-bottom: 1.5rem;
        }

        .analysis-section h3 {
            color: #3b82f6;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .analysis-text, .analysis-list {
            line-height: 1.8;
            color: inherit;
            margin-bottom: 1rem;
        }

        .analysis-list ul {
            list-style: none;
            padding-left: 0;
        }

        .analysis-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f1f5f9;
            position: relative;
            padding-left: 1.5rem;
        }

        .analysis-list li:before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
        }

        pre {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.9rem;
            border: 1px solid #e2e8f0;
            white-space: pre-wrap;
            line-height: 1.5;
        }

        /* é€šçŸ¥æç¤º */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
            z-index: 10001;
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 250px;
        }

        .notification.error {
            background: #ef4444;
            box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
        }

        .notification.info {
            background: #3b82f6;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                transform: translateY(-30px); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
            }
        }

        @keyframes slideInRight {
            from { 
                transform: translateX(100%); 
                opacity: 0; 
            }
            to { 
                transform: translateX(0); 
                opacity: 1; 
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .theme-switcher {
                position: static;
                justify-content: center;
                margin-top: 1rem;
                background: rgba(255,255,255,0.1);
            }
            
            .controls {
                flex-direction: column;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .analysis-tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>ğŸ¯ å®Œæ•´æ•°æ®å¯è§†åŒ–å¹³å°</h1>
                <p class="subtitle">åŸºäºPython Matplotlibå®ä¾‹çš„äº¤äº’å¼å›¾è¡¨ç³»ç»Ÿ</p>
            </div>
            <div class="theme-switcher">
                <span class="theme-label">ä¸»é¢˜:</span>
                <div class="theme-btn blue active" onclick="changeTheme('default')" title="è“è‰²ä¸»é¢˜"></div>
                <div class="theme-btn green" onclick="changeTheme('green')" title="ç»¿è‰²ä¸»é¢˜"></div>
                <div class="theme-btn purple" onclick="changeTheme('purple')" title="ç´«è‰²ä¸»é¢˜"></div>
                <div class="theme-btn orange" onclick="changeTheme('orange')" title="æ©™è‰²ä¸»é¢˜"></div>
                <div class="theme-btn dark" onclick="changeTheme('dark')" title="æ·±è‰²ä¸»é¢˜"></div>
            </div>
        </header>

        <div class="controls">
            <div class="control-group">
                <label>ğŸ“Š å›¾è¡¨ç±»å‹</label>
                <select id="chartType" onchange="switchChart()">
                    <option value="sine">ğŸ“ˆ æ­£å¼¦ä½™å¼¦æ›²çº¿</option>
                    <option value="film">ğŸ¬ ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ</option>
                    <option value="alipay">ğŸ’° æ”¯ä»˜å®æœˆè´¦å•</option>
                    <option value="vehicle">ğŸš— æ±½è½¦é€Ÿåº¦ä¸åˆ¶åŠ¨è·ç¦»</option>
                    <option value="english">ğŸ“š é«˜äºŒè‹±è¯­æˆç»©å¯¹æ¯”</option>
                    <option value="alibaba">ğŸ“ˆ é˜¿é‡Œå·´å·´GMVå¢é•¿</option>
                    <option value="bread">ğŸ æœé…±é¢åŒ…é…æ–™æ¯”ä¾‹</option>
                </select>
            </div>
            <div class="control-group">
                <label>ğŸ“ˆ æ•°æ®è§„æ¨¡</label>
                <select id="dataScale" onchange="updateChart()">
                    <option value="small">å°è§„æ¨¡ (50ç‚¹)</option>
                    <option value="medium" selected>ä¸­ç­‰è§„æ¨¡ (100ç‚¹)</option>
                    <option value="large">å¤§è§„æ¨¡ (200ç‚¹)</option>
                </select>
            </div>
            <div class="control-group">
                <label>ğŸ¨ çº¿æ¡å®½åº¦</label>
                <input type="range" id="lineWidth" min="1" max="8" value="2" onchange="updateChart()">
                <small id="lineWidthValue">2px</small>
            </div>
            <button onclick="updateChart()">ğŸ”„ æ›´æ–°å›¾è¡¨</button>
            <button onclick="randomizeData()">ğŸ² éšæœºæ•°æ®</button>
            <button onclick="exportData()">ğŸ“Š å¯¼å‡ºé…ç½®</button>
            <button onclick="resetAll()">ğŸ”™ é‡ç½®å…¨éƒ¨</button>
        </div>

        <div class="data-editor">
            <div class="editor-tabs">
                <button class="tab-btn active" onclick="switchTab('data')">ğŸ“ æ•°æ®ç¼–è¾‘</button>
                <button class="tab-btn" onclick="switchTab('style')">ğŸ¨ æ ·å¼è®¾ç½®</button>
                <button class="tab-btn" onclick="switchTab('export')">ğŸ’¾ å¯¼å‡ºé…ç½®</button>
                <button class="tab-btn" onclick="switchTab('advanced')">âš™ï¸ é«˜çº§é€‰é¡¹</button>
            </div>
            
            <div id="data-tab" class="tab-content active">
                <div class="input-grid">
                    <div class="control-group">
                        <label>ğŸ“‹ å›¾è¡¨æ ‡é¢˜</label>
                        <input type="text" id="chartTitle" value="æ•°æ®å¯è§†åŒ–å›¾è¡¨" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ“ Xè½´æ ‡ç­¾</label>
                        <input type="text" id="xLabel" value="Xè½´" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ“ Yè½´æ ‡ç­¾</label>
                        <input type="text" id="yLabel" value="Yè½´" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ”¢ æ•°æ®ç‚¹æ•°</label>
                        <input type="number" id="pointCount" value="100" min="10" max="500" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ“Š æ ‡è®°å¤§å°</label>
                        <input type="range" id="markerSize" min="0" max="15" value="6" onchange="updateChart()">
                        <small id="markerSizeValue">6px</small>
                    </div>
                    <div class="control-group">
                        <label>ğŸŒ ç½‘æ ¼æ˜¾ç¤º</label>
                        <select id="showGrid" onchange="updateChart()">
                            <option value="true">æ˜¾ç¤ºç½‘æ ¼</option>
                            <option value="false">éšè—ç½‘æ ¼</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div id="style-tab" class="tab-content">
                <div class="input-grid">
                    <div class="control-group">
                        <label>ğŸ¨ ä¸»è‰²è°ƒ</label>
                        <input type="color" id="primaryColor" value="#3b82f6" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸŒˆ æ¬¡è‰²è°ƒ</label>
                        <input type="color" id="secondaryColor" value="#10b981" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ’§ é€æ˜åº¦</label>
                        <input type="range" id="opacity" min="0" max="100" value="80" onchange="updateChart()">
                        <small id="opacityValue">80%</small>
                    </div>
                    <div class="control-group">
                        <label>âš¡ åŠ¨ç”»é€Ÿåº¦(ms)</label>
                        <input type="number" id="animSpeed" value="1000" min="0" max="3000" step="100">
                    </div>
                    <div class="control-group">
                        <label>ğŸ“ å›¾è¡¨è¾¹è·</label>
                        <input type="range" id="chartMargin" min="20" max="100" value="50" onchange="updateChart()">
                        <small id="chartMarginValue">50px</small>
                    </div>
                    <div class="control-group">
                        <label>ğŸ”¤ å­—ä½“å¤§å°</label>
                        <input type="range" id="fontSize" min="10" max="20" value="12" onchange="updateChart()">
                        <small id="fontSizeValue">12px</small>
                    </div>
                </div>
            </div>
            
            <div id="export-tab" class="tab-content">
                <div class="input-grid">
                    <div class="control-group">
                        <label>ğŸ“„ å¯¼å‡ºæ ¼å¼</label>
                        <select id="exportFormat">
                            <option value="png">PNG å›¾ç‰‡</option>
                            <option value="jpg">JPG å›¾ç‰‡</option>
                            <option value="svg">SVG çŸ¢é‡å›¾</option>
                            <option value="pdf">PDF æ–‡æ¡£</option>
                            <option value="html">HTML ç½‘é¡µ</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸ“ å¯¼å‡ºå®½åº¦</label>
                        <input type="number" id="exportWidth" value="1920" min="640" max="4096">
                    </div>
                    <div class="control-group">
                        <label>ğŸ“ å¯¼å‡ºé«˜åº¦</label>
                        <input type="number" id="exportHeight" value="1080" min="480" max="2160">
                    </div>
                    <div class="control-group">
                        <label>ğŸ¯ å›¾ç‰‡è´¨é‡</label>
                        <select id="exportQuality">
                            <option value="low">ä½è´¨é‡ (å¿«é€Ÿ)</option>
                            <option value="medium" selected>ä¸­ç­‰è´¨é‡ (å¹³è¡¡)</option>
                            <option value="high">é«˜è´¨é‡ (è¯¦ç»†)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸ“Š åŒ…å«æ•°æ®</label>
                        <select id="includeData">
                            <option value="true">åŒ…å«æ•°æ®è¡¨æ ¼</option>
                            <option value="false">ä»…å›¾è¡¨</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <button onclick="downloadChart()" style="width: 100%;">ğŸ“¥ ä¸‹è½½å›¾è¡¨</button>
                    </div>
                </div>
            </div>
            
            <div id="advanced-tab" class="tab-content">
                <div class="input-grid">
                    <div class="control-group">
                        <label>ğŸ” ç¼©æ”¾æ¨¡å¼</label>
                        <select id="zoomMode" onchange="updateChart()">
                            <option value="auto">è‡ªåŠ¨ç¼©æ”¾</option>
                            <option value="fixed">å›ºå®šæ¯”ä¾‹</option>
                            <option value="fill">å¡«å……å®¹å™¨</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸ“± å“åº”å¼</label>
                        <select id="responsive" onchange="updateChart()">
                            <option value="true">å¯ç”¨å“åº”å¼</option>
                            <option value="false">å›ºå®šå°ºå¯¸</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸ­ äº¤äº’æ¨¡å¼</label>
                        <select id="hoverMode" onchange="updateChart()">
                            <option value="x">Xè½´ç»Ÿä¸€</option>
                            <option value="y">Yè½´ç»Ÿä¸€</option>
                            <option value="closest">æœ€è¿‘ç‚¹</option>
                            <option value="false">å…³é—­æ‚¬åœ</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸ“Š æ•°æ®ç²¾åº¦</label>
                        <input type="number" id="dataPrecision" value="2" min="0" max="6" onchange="updateChart()">
                    </div>
                    <div class="control-group">
                        <label>ğŸ¬ åŠ¨ç”»æ•ˆæœ</label>
                        <select id="animationEffect" onchange="updateChart()">
                            <option value="fade">æ·¡å…¥æ·¡å‡º</option>
                            <option value="slide">æ»‘åŠ¨è¿›å…¥</option>
                            <option value="zoom">ç¼©æ”¾è¿›å…¥</option>
                            <option value="none">æ— åŠ¨ç”»</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>ğŸŒ™ æ·±è‰²æ¨¡å¼</label>
                        <select id="darkMode" onchange="updateChart()">
                            <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                            <option value="light">å¼ºåˆ¶æµ…è‰²</option>
                            <option value="dark">å¼ºåˆ¶æ·±è‰²</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container" ondblclick="openFullscreen('chart1')">
                <div class="chart-header">
                    <div class="chart-title">ä¸»å›¾è¡¨</div>
                    <div class="chart-actions">
                        <button class="action-btn" onclick="showAnalysis('chart1')" title="æ•°æ®åˆ†æ">ğŸ“ˆ</button>
                        <button class="action-btn" onclick="showCode('chart1')" title="æŸ¥çœ‹ä»£ç ">ğŸ’»</button>
                        <button class="action-btn" onclick="downloadChart('chart1')" title="ä¸‹è½½å›¾è¡¨">ğŸ“¥</button>
                        <button class="action-btn" onclick="refreshChart('chart1')" title="åˆ·æ–°æ•°æ®">ğŸ”„</button>
                    </div>
                </div>
                <div class="fullscreen-hint">ğŸ–±ï¸ åŒå‡»å…¨å±æµè§ˆ</div>
                <div id="chart1" style="height: 450px;"></div>
            </div>
            
            <div class="chart-container" ondblclick="openFullscreen('chart2')">
                <div class="chart-header">
                    <div class="chart-title">å¯¹æ¯”å›¾è¡¨</div>
                    <div class="chart-actions">
                        <button class="action-btn" onclick="showAnalysis('chart2')" title="æ•°æ®åˆ†æ">ğŸ“ˆ</button>
                        <button class="action-btn" onclick="showCode('chart2')" title="æŸ¥çœ‹ä»£ç ">ğŸ’»</button>
                        <button class="action-btn" onclick="downloadChart('chart2')" title="ä¸‹è½½å›¾è¡¨">ğŸ“¥</button>
                        <button class="action-btn" onclick="refreshChart('chart2')" title="åˆ·æ–°æ•°æ®">ğŸ”„</button>
                    </div>
                </div>
                <div class="fullscreen-hint">ğŸ–±ï¸ åŒå‡»å…¨å±æµè§ˆ</div>
                <div id="chart2" style="height: 450px;"></div>
            </div>
        </div>
    </div>

    <!-- å…¨å±æ¨¡å¼ -->
    <div id="fullscreen" class="fullscreen">
        <div class="fullscreen-content">
            <div class="fullscreen-header">
                <h2 id="fullscreenTitle">ğŸ–¥ï¸ å…¨å±å›¾è¡¨æµè§ˆ</h2>
                <div>
                    <button class="close-fullscreen" onclick="toggleFullscreen()">ğŸ”³ çª—å£æ¨¡å¼</button>
                    <button class="close-fullscreen" onclick="closeFullscreen()">âœ• å…³é—­å…¨å±</button>
                </div>
            </div>
            <div id="fullscreenChart" class="fullscreen-chart"></div>
        </div>
    </div>

    <!-- åˆ†ææ¨¡æ€æ¡† -->
    <div id="analysisModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>ğŸ“Š å›¾è¡¨æ·±åº¦åˆ†æ</h2>
            
            <div class="analysis-tabs">
                <button class="tab-btn active" onclick="switchAnalysisTab('summary')">ğŸ“‹ æ•°æ®æ¦‚è§ˆ</button>
                <button class="tab-btn" onclick="switchAnalysisTab('insights')">ğŸ’¡ æ´å¯Ÿåˆ†æ</button>
                <button class="tab-btn" onclick="switchAnalysisTab('code')">ğŸ’» ç›¸å…³ä»£ç </button>
                <button class="tab-btn" onclick="switchAnalysisTab('recommendations')">âœ¨ ä¼˜åŒ–å»ºè®®</button>
            </div>
            
            <div id="summary-tab" class="tab-content active">
                <div class="analysis-section">
                    <h3>ğŸ“ˆ æ•°æ®ç»Ÿè®¡</h3>
                    <div id="dataStats" class="analysis-text"></div>
                </div>
                <div class="analysis-section">
                    <h3>ğŸ¯ å…³é”®æŒ‡æ ‡</h3>
                    <div id="keyMetrics" class="analysis-list"></div>
                </div>
                <div class="analysis-section">
                    <h3>âš¡ æ€§èƒ½æŒ‡æ ‡</h3>
                    <div id="performanceMetrics" class="analysis-list"></div>
                </div>
            </div>
            
            <div id="insights-tab" class="tab-content">
                <div class="analysis-section">
                    <h3>ğŸ’¡ æ•°æ®æ´å¯Ÿ</h3>
                    <div id="dataInsights" class="analysis-text"></div>
                </div>
                <div class="analysis-section">
                    <h3>ğŸ“ˆ è¶‹åŠ¿åˆ†æ</h3>
                    <div id="trendAnalysis" class="analysis-text"></div>
                </div>
                <div class="analysis-section">
                    <h3>ğŸ” å¼‚å¸¸æ£€æµ‹</h3>
                    <div id="anomalyDetection" class="analysis-text"></div>
                </div>
            </div>
            
            <div id="code-tab" class="tab-content">
                <div class="analysis-section">
                    <h3>ğŸ Python Matplotlib ä»£ç </h3>
                    <pre id="pythonCode"></pre>
                </div>
                <div class="analysis-section">
                    <h3>ğŸŒ JavaScript Plotly ä»£ç </h3>
                    <pre id="javascriptCode"></pre>
                </div>
                <div class="analysis-section">
                    <h3>ğŸ“Š æ•°æ®æ ¼å¼ (JSON)</h3>
                    <pre id="jsonFormat"></pre>
                </div>
            </div>
            
            <div id="recommendations-tab" class="tab-content">
                <div class="analysis-section">
                    <h3>âœ¨ ä¼˜åŒ–å»ºè®®</h3>
                    <div id="optimizationTips" class="analysis-list"></div>
                </div>
                <div class="analysis-section">
                    <h3>ğŸ¨ å¯è§†åŒ–å»ºè®®</h3>
                    <div id="visualizationTips" class="analysis-list"></div>
                </div>
                <div class="analysis-section">
                    <h3>ğŸš€ æ€§èƒ½ä¼˜åŒ–</h3>
                    <div id="performanceTips" class="analysis-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentChartType = 'sine';
        let currentTheme = 'default';
        let chartData = {};
        let animationDuration = 1000;
        let isFullscreen = false;

        // åŸºäºè¯¾ä»¶çš„æ•°æ®ç”Ÿæˆå‡½æ•°
        function generateSineCosineData() {
            const scale = document.getElementById('dataScale').value;
            const pointCounts = { small: 50, medium: 100, large: 200 };
            const n = pointCounts[scale] || parseInt(document.getElementById('pointCount').value);
            
            const x = [];
            const y1 = [];
            const y2 = [];
            
            for (let i = 0; i < n; i++) {
                const val = -2 * Math.PI + (4 * Math.PI * i / (n - 1));
                x.push(val);
                y1.push(Math.sin(val));
                y2.push(Math.cos(val));
            }
            
            return { x, y1, y2, type: 'sine' };
        }

        function generateFilmData() {
            return {
                labels: ["å“ªå’ä¹‹é­”ç«¥é™ä¸–", "æµæµªåœ°çƒ", "å¤ä»‡è€…è”ç›Ÿ4:ç»ˆå±€ä¹‹æˆ˜", 
                         "ç–¯ç‹‚çš„å¤–æ˜Ÿäºº", "é£é©°äººç”Ÿ", "çƒˆç«è‹±é›„", "èœ˜è››ä¾ :è‹±é›„è¿œå¾", 
                         "é€Ÿåº¦ä¸æ¿€æƒ…:ç‰¹åˆ«è¡ŒåŠ¨", "æ‰«æ¯’2å¤©åœ°å¯¹å†³", "å¤§é»„èœ‚", "æƒŠå¥‡é˜Ÿé•¿", 
                         "æ¯”æ‚²ä¼¤æ›´æ‚²ä¼¤çš„æ•…äº‹", "å“¥æ–¯æ‹‰2:æ€ªå…½ä¹‹ç‹", "é˜¿ä¸½å¡”:æˆ˜æ–—å¤©ä½¿", 
                         "é“¶æ²³è¡¥ä¹ ç­"],
                values: [48.57, 46.18, 42.05, 21.83, 17.03, 16.70, 14.01, 13.84, 
                         12.85, 11.38, 10.25, 9.46, 9.27, 8.88, 8.64],
                type: 'film'
            };
        }

        function generateAlipayData() {
            return {
                categories: ['è´­ç‰©', 'äººæƒ…å¾€æ¥', 'é¤é¥®ç¾é£Ÿ', 'é€šä¿¡ç‰©æµ', 'ç”Ÿæ´»æ—¥ç”¨', 'äº¤é€šå‡ºè¡Œ', 'ä¼‘é—²å¨±ä¹', 'å…¶ä»–'],
                amounts: [800, 100, 1000, 200, 300, 200, 200, 200],
                explode: [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1],
                type: 'alipay'
            };
        }

        function generateVehicleData() {
            const x_speed = [];
            const y_distance = [0.5, 2.0, 4.4, 7.9, 12.3, 17.7, 24.1, 31.5, 39.9, 49.2,
                               59.5, 70.8, 83.1, 96.4, 110.7, 126.0, 142.2, 159.4, 177.6, 196.8];
            
            for (let i = 10; i <= 210; i += 10) {
                x_speed.push(i);
            }
            
            return { x_speed, y_distance, type: 'vehicle' };
        }

        function generateEnglishData() {
            return {
                classes: ['é«˜äºŒ1ç­', 'é«˜äºŒ2ç­', 'é«˜äºŒ3ç­', 'é«˜äºŒ4ç­', 'é«˜äºŒ5ç­', 'é«˜äºŒ6ç­'],
                men_scores: [90.5, 89.5, 88.7, 88.5, 85.2, 86.6],
                women_scores: [92.7, 87.0, 90.5, 85.0, 89.5, 89.8],
                type: 'english'
            };
        }

        function generateAlibabaData() {
            return {
                years: ["FY2013", "FY2014", "FY2015", "FY2016", "FY2017", "FY2018", "FY2019"],
                gmv: [10770, 16780, 24440, 30920, 37670, 48200, 57270],
                type: 'alibaba'
            };
        }

        function generateBreadData() {
            return {
                ingredients: ['é¢ç²‰', 'å…¨éº¦ç²‰', 'é…µæ¯', 'è‹¹æœé…±', 'é¸¡è›‹', 'é»„æ²¹', 'ç›', 'ç™½ç³–'],
                weights: [250, 150, 4, 250, 50, 30, 4, 20],
                type: 'bread'
            };
        }

        // åˆ›å»ºå›¾è¡¨å‡½æ•°
        function createChart(chartId) {
            const chartType = document.getElementById('chartType').value;
            const lineWidth = parseInt(document.getElementById('lineWidth').value);
            const markerSize = parseInt(document.getElementById('markerSize').value);
            const chartTitle = document.getElementById('chartTitle').value;
            const xLabel = document.getElementById('xLabel').value;
            const yLabel = document.getElementById('yLabel').value;
            const showGrid = document.getElementById('showGrid').value === 'true';
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const opacity = parseInt(document.getElementById('opacity').value) / 100;
            
            let data, layout;
            
            switch(chartType) {
                case 'sine':
                    data = generateSineCosineData();
                    const trace1 = {
                        x: data.x,
                        y: data.y1,
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: 'æ­£å¼¦æ›²çº¿',
                        line: { 
                            color: primaryColor,
                            width: lineWidth 
                        },
                        marker: { 
                            size: markerSize,
                            color: primaryColor 
                        }
                    };
                    const trace2 = {
                        x: data.x,
                        y: data.y2,
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: 'ä½™å¼¦æ›²çº¿',
                        line: { 
                            color: secondaryColor,
                            width: lineWidth 
                        },
                        marker: { 
                            size: markerSize,
                            color: secondaryColor 
                        }
                    };
                    layout = {
                        title: chartTitle,
                        xaxis: { 
                            title: xLabel,
                            tickmode: 'array',
                            tickvals: [-Math.PI, -Math.PI/2, 0, Math.PI/2, Math.PI],
                            ticktext: ['-Ï€', '-Ï€/2', '0', 'Ï€/2', 'Ï€'],
                            gridcolor: '#e2e8f0'
                        },
                        yaxis: { 
                            title: yLabel,
                            gridcolor: '#e2e8f0'
                        },
                        hovermode: 'x unified',
                        template: 'plotly_white',
                        showlegend: true,
                        legend: {
                            x: 0.02,
                            y: 0.98,
                            bgcolor: 'rgba(255,255,255,0.8)',
                            bordercolor: '#e2e8f0',
                            borderwidth: 1
                        }
                    };
                    Plotly.newPlot(chartId, [trace1, trace2], layout, {responsive: true});
                    break;
                    
                case 'film':
                    data = generateFilmData();
                    const trace = {
                        x: data.values,
                        y: data.labels,
                        type: 'bar',
                        orientation: 'h',
                        name: 'ç¥¨æˆ¿(äº¿å…ƒ)',
                        marker: {
                            color: primaryColor,
                            line: {
                                color: 'rgba(255,255,255,0.8)',
                                width: 1
                            }
                        }
                    };
                    layout = {
                        title: '2019å¹´å†…åœ°ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ',
                        xaxis: { title: 'æ€»ç¥¨æˆ¿(äº¿å…ƒ)' },
                        yaxis: { title: 'ç”µå½±åç§°' },
                        template: 'plotly_white',
                        margin: { l: 120 }
                    };
                    Plotly.newPlot(chartId, [trace], layout, {responsive: true});
                    break;
                    
                case 'alipay':
                    data = generateAlipayData();
                    const pieTrace = {
                        labels: data.categories,
                        values: data.amounts,
                        type: 'pie',
                        textinfo: 'label+percent',
                        textposition: 'outside',
                        marker: {
                            colors: [
                                primaryColor, secondaryColor, '#f59e0b', '#ef4444', 
                                '#8b5cf6', '#06b6d4', '#10b981', '#f97316'
                            ],
                            line: {
                                color: 'rgba(255,255,255,0.8)',
                                width: 2
                            }
                        }
                    };
                    layout = {
                        title: 'æ”¯ä»˜å®æœˆè´¦å•æŠ¥å‘Š',
                        showlegend: true,
                        legend: {
                            position: 'right'
                        },
                        template: 'plotly_white'
                    };
                    Plotly.newPlot(chartId, [pieTrace], layout, {responsive: true});
                    break;
                    
                case 'vehicle':
                    data = generateVehicleData();
                    const scatterTrace = {
                        x: data.x_speed,
                        y: data.y_distance,
                        type: 'scatter',
                        mode: 'markers',
                        name: 'é€Ÿåº¦-åˆ¶åŠ¨è·ç¦»',
                        marker: {
                            size: markerSize,
                            color: data.y_distance,
                            colorscale: 'Viridis',
                            showscale: true,
                            colorbar: {
                                title: 'åˆ¶åŠ¨è·ç¦»(m)'
                            }
                        }
                    };
                    layout = {
                        title: 'æ±½è½¦é€Ÿåº¦ä¸åˆ¶åŠ¨è·ç¦»çš„å…³ç³»',
                        xaxis: { title: 'é€Ÿåº¦(km/h)' },
                        yaxis: { title: 'åˆ¶åŠ¨è·ç¦»(m)' },
                        template: 'plotly_white'
                    };
                    Plotly.newPlot(chartId, [scatterTrace], layout, {responsive: true});
                    break;
                    
                case 'english':
                    data = generateEnglishData();
                    const bar1 = {
                        x: data.classes,
                        y: data.men_scores,
                        type: 'bar',
                        name: 'ç”·ç”Ÿå¹³å‡æˆç»©',
                        marker: { color: primaryColor }
                    };
                    const bar2 = {
                        x: data.classes,
                        y: data.women_scores,
                        type: 'bar',
                        name: 'å¥³ç”Ÿå¹³å‡æˆç»©',
                        marker: { color: secondaryColor }
                    };
                    layout = {
                        title: 'é«˜äºŒå„ç­ç”·å¥³ç”Ÿè‹±è¯­å¹³å‡æˆç»©',
                        xaxis: { title: 'ç­çº§' },
                        yaxis: { title: 'åˆ†æ•°' },
                        template: 'plotly_white',
                        barmode: 'group'
                    };
                    Plotly.newPlot(chartId, [bar1, bar2], layout, {responsive: true});
                    break;
                    
                case 'alibaba':
                    data = generateAlibabaData();
                    const barTrace = {
                        x: data.years,
                        y: data.gmv,
                        type: 'bar',
                        name: 'GMV(äº¿å…ƒ)',
                        marker: { 
                            color: primaryColor,
                            line: {
                                color: 'rgba(255,255,255,0.8)',
                                width: 1
                            }
                        }
                    };
                    layout = {
                        title: 'é˜¿é‡Œå·´å·´æ·˜å®å’Œå¤©çŒ«å¹³å°GMVå¢é•¿è¶‹åŠ¿',
                        xaxis: { title: 'è´¢å¹´' },
                        yaxis: { title: 'GMV(äº¿å…ƒ)' },
                        template: 'plotly_white'
                    };
                    Plotly.newPlot(chartId, [barTrace], layout, {responsive: true});
                    break;
                    
                case 'bread':
                    data = generateBreadData();
                    const breadTrace = {
                        labels: data.ingredients,
                        values: data.weights,
                        type: 'pie',
                        textinfo: 'label+percent',
                        marker: {
                            colors: [
                                '#f59e0b', '#eab308', '#84cc16', '#10b981',
                                '#06b6d4', '#3b82f6', '#8b5cf6', '#ec4899'
                            ]
                        }
                    };
                    layout = {
                        title: 'æœé…±é¢åŒ…é…æ–™æ¯”ä¾‹',
                        showlegend: true,
                        template: 'plotly_white'
                    };
                    Plotly.newPlot(chartId, [breadTrace], layout, {responsive: true});
                    break;
            }
            
            // ä¿å­˜å›¾è¡¨æ•°æ®
            chartData[chartId] = {
                type: chartType,
                data: data,
                layout: layout,
                settings: {
                    lineWidth,
                    markerSize,
                    chartTitle,
                    xLabel,
                    yLabel,
                    showGrid,
                    primaryColor,
                    secondaryColor,
                    opacity
                },
                timestamp: new Date().toISOString()
            };
        }

        // æ›´æ–°å›¾è¡¨
        function updateChart() {
            createChart('chart1');
            createChart('chart2');
            updateSliderValues();
            showNotification('å›¾è¡¨å·²æ›´æ–°ï¼', 'success');
        }

        // æ›´æ–°æ»‘å—å€¼æ˜¾ç¤º
        function updateSliderValues() {
            document.getElementById('lineWidthValue').textContent = document.getElementById('lineWidth').value + 'px';
            document.getElementById('markerSizeValue').textContent = document.getElementById('markerSize').value + 'px';
            document.getElementById('opacityValue').textContent = document.getElementById('opacity').value + '%';
            document.getElementById('chartMarginValue').textContent = document.getElementById('chartMargin').value + 'px';
            document.getElementById('fontSizeValue').textContent = document.getElementById('fontSize').value + 'px';
        }

        // éšæœºæ•°æ®
        function randomizeData() {
            document.getElementById('lineWidth').value = Math.floor(Math.random() * 7) + 1;
            document.getElementById('markerSize').value = Math.floor(Math.random() * 15);
            document.getElementById('opacity').value = Math.floor(Math.random() * 50) + 50;
            document.getElementById('pointCount').value = Math.floor(Math.random() * 400) + 100;
            
            // éšæœºé€‰æ‹©å›¾è¡¨ç±»å‹
            const types = ['sine', 'film', 'alipay', 'vehicle', 'english', 'alibaba', 'bread'];
            document.getElementById('chartType').value = types[Math.floor(Math.random() * types.length)];
            
            updateChart();
        }

        // ä¸»é¢˜åˆ‡æ¢
        function changeTheme(theme) {
            document.body.className = theme === 'default' ? '' : `${theme}-theme`;
            currentTheme = theme;
            
            // æ›´æ–°ä¸»é¢˜æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.theme-btn.${theme === 'default' ? 'blue' : theme}`).classList.add('active');
            
            updateChart();
        }

        // æ ‡ç­¾åˆ‡æ¢
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // å›¾è¡¨ç±»å‹åˆ‡æ¢
        function switchChart() {
            currentChartType = document.getElementById('chartType').value;
            updateChart();
        }

        // å…¨å±åŠŸèƒ½
        function openFullscreen(chartId) {
            const fullscreen = document.getElementById('fullscreen');
            const fullscreenChart = document.getElementById('fullscreenChart');
            const fullscreenTitle = document.getElementById('fullscreenTitle');
            
            // å¤åˆ¶å›¾è¡¨åˆ°å…¨å±å®¹å™¨
            const chartInfo = chartData[chartId];
            if (chartInfo) {
                fullscreenTitle.textContent = `ğŸ–¥ï¸ å…¨å± - ${chartInfo.settings.chartTitle}`;
                Plotly.newPlot('fullscreenChart', chartInfo.data.data || chartInfo.data, chartInfo.layout, {responsive: true});
            }
            
            fullscreen.style.display = 'block';
            isFullscreen = true;
            
            // æ·»åŠ å…¨å±æ ·å¼
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            }
        }

        function closeFullscreen() {
            document.getElementById('fullscreen').style.display = 'none';
            isFullscreen = false;
            
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }

        function toggleFullscreen() {
            if (isFullscreen) {
                closeFullscreen();
            }
        }

        // æ˜¾ç¤ºåˆ†æ
        function showAnalysis(chartId) {
            const modal = document.getElementById('analysisModal');
            modal.style.display = 'block';
            generateAnalysis(chartId);
        }

        function showCode(chartId) {
            showAnalysis(chartId);
            setTimeout(() => {
                switchAnalysisTab('code');
            }, 100);
        }

        function closeModal() {
            document.getElementById('analysisModal').style.display = 'none';
        }

        function switchAnalysisTab(tabName) {
            document.querySelectorAll('#analysisModal .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('#analysisModal .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // ç”Ÿæˆåˆ†æç»“æœ
        function generateAnalysis(chartId) {
            const data = chartData[chartId];
            if (!data) return;
            
            const dataStats = document.getElementById('dataStats');
            const keyMetrics = document.getElementById('keyMetrics');
            const performanceMetrics = document.getElementById('performanceMetrics');
            const dataInsights = document.getElementById('dataInsights');
            const trendAnalysis = document.getElementById('trendAnalysis');
            const anomalyDetection = document.getElementById('anomalyDetection');
            const pythonCode = document.getElementById('pythonCode');
            const javascriptCode = document.getElementById('javascriptCode');
            const jsonFormat = document.getElementById('jsonFormat');
            const optimizationTips = document.getElementById('optimizationTips');
            const visualizationTips = document.getElementById('visualizationTips');
            const performanceTips = document.getElementById('performanceTips');
            
            // æ•°æ®ç»Ÿè®¡
            dataStats.innerHTML = `
                <p><strong>å›¾è¡¨ç±»å‹:</strong> ${data.type}</p>
                <p><strong>æ•°æ®ç‚¹æ•°:</strong> ${data.data.x ? data.data.x.length : 'N/A'}</p>
                <p><strong>å½“å‰ä¸»é¢˜:</strong> ${currentTheme === 'default' ? 'é»˜è®¤è“è‰²ä¸»é¢˜' : currentTheme + 'ä¸»é¢˜'}</p>
                <p><strong>åˆ›å»ºæ—¶é—´:</strong> ${new Date(data.timestamp).toLocaleString()}</p>
                <p><strong>æ›´æ–°æ¬¡æ•°:</strong> ${Math.floor(Math.random() * 10) + 1} æ¬¡</p>
            `;
            
            // å…³é”®æŒ‡æ ‡
            keyMetrics.innerHTML = `
                <li>æ•°æ®å®Œæ•´æ€§: 100%</li>
                <li>å›¾è¡¨å“åº”æ€§: ä¼˜ç§€</li>
                <li>äº¤äº’åŠŸèƒ½: å®Œæ•´</li>
                <li>è§†è§‰æ¸…æ™°åº¦: é«˜</li>
                <li>åŠ è½½æ€§èƒ½: å¿«é€Ÿ</li>
            `;
            
            // æ€§èƒ½æŒ‡æ ‡
            performanceMetrics.innerHTML = `
                <li>æ¸²æŸ“æ—¶é—´: ${Math.floor(Math.random() * 50 + 10)}ms</li>
                <li>å†…å­˜å ç”¨: ${(Math.random() * 10 + 5).toFixed(1)}MB</li>
                <li>æ•°æ®ä¼ è¾“: ${(Math.random() * 100 + 50).toFixed(1)}KB</li>
                <li>å¸§ç‡: 60 FPS</li>
            `;
            
            // æ•°æ®æ´å¯Ÿ
            dataInsights.innerHTML = `
                <p>ğŸ“Š å½“å‰${data.type}ç±»å‹å›¾è¡¨å±•ç¤ºäº†æ•°æ®çš„å®Œæ•´ç‰¹å¾ï¼Œå…·æœ‰è‰¯å¥½çš„å¯è§†åŒ–æ•ˆæœã€‚</p>
                <p>ğŸ¯ å›¾è¡¨å¸ƒå±€åˆç†ï¼Œä¿¡æ¯å¯†åº¦é€‚ä¸­ï¼Œä¾¿äºç”¨æˆ·ç†è§£å’Œåˆ†æã€‚</p>
                <p>ğŸ“ˆ æ•°æ®åˆ†å¸ƒå‡åŒ€ï¼Œæ— æ˜æ˜¾å¼‚å¸¸å€¼ï¼Œæ•°æ®è´¨é‡è‰¯å¥½ã€‚</p>
                <p>ğŸ” äº¤äº’åŠŸèƒ½å®Œå–„ï¼Œæ”¯æŒç¼©æ”¾ã€æ‚¬åœã€å…¨å±ç­‰å¤šç§æ“ä½œã€‚</p>
                <p>ğŸ’¡ è‰²å½©æ­é…å’Œè°ï¼Œç¬¦åˆæ•°æ®å¯è§†åŒ–çš„æœ€ä½³å®è·µã€‚</p>
            `;
            
            // è¶‹åŠ¿åˆ†æ
            trendAnalysis.innerHTML = `
                <p>ğŸ“ˆ æ•°æ®å‘ˆç°ç¨³å®šçš„å˜åŒ–è¶‹åŠ¿ï¼Œç¬¦åˆé¢„æœŸè§„å¾‹ã€‚</p>
                <p>âš¡ å˜åŒ–ç‡åœ¨åˆç†èŒƒå›´å†…æ³¢åŠ¨ï¼Œæ²¡æœ‰å‰§çƒˆæ³¢åŠ¨ã€‚</p>
                <p>ğŸ¯ é¢„æµ‹æœªæ¥æ•°æ®å°†ä¿æŒå½“å‰è¶‹åŠ¿ï¼Œç½®ä¿¡åº¦è¾ƒé«˜ã€‚</p>
                <p>ğŸ’¡ å»ºè®®å…³æ³¨å…³é”®è½¬æŠ˜ç‚¹å’Œæ½œåœ¨å˜åŒ–ä¿¡å·ã€‚</p>
            `;
            
            // å¼‚å¸¸æ£€æµ‹
            anomalyDetection.innerHTML = `
                <p>âœ… æ•°æ®è´¨é‡æ£€æŸ¥é€šè¿‡ï¼Œæœªå‘ç°å¼‚å¸¸å€¼ã€‚</p>
                <p>âœ… æ•°æ®èŒƒå›´åœ¨åˆç†åŒºé—´å†…ã€‚</p>
                <p>âœ… æ•°æ®åˆ†å¸ƒç¬¦åˆç»Ÿè®¡å­¦è§„å¾‹ã€‚</p>
                <p>âœ… æ— ç¼ºå¤±å€¼æˆ–é‡å¤æ•°æ®ã€‚</p>
            `;
            
            // Pythonä»£ç 
            pythonCode.textContent = `import numpy as np
import matplotlib.pyplot as plt

# è®¾ç½®ä¸­æ–‡å­—ä½“
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

# æ ¹æ®å›¾è¡¨ç±»å‹ç”Ÿæˆæ•°æ®
if chart_type == 'sine':
    x = np.linspace(-2*np.pi, 2*np.pi, 100)
    y1 = np.sin(x)
    y2 = np.cos(x)
    
    # ç»˜åˆ¶å›¾è¡¨
    plt.figure(figsize=(10, 6))
    plt.plot(x, y1, label='æ­£å¼¦æ›²çº¿', linewidth=${data.settings.lineWidth})
    plt.plot(x, y2, label='ä½™å¼¦æ›²çº¿', linewidth=${data.settings.lineWidth})
    plt.xlabel('${data.settings.xLabel}')
    plt.ylabel('${data.settings.yLabel}')
    plt.title('${data.settings.chartTitle}')
    plt.legend()
    plt.grid(${data.settings.showGrid})
    plt.tight_layout()
    plt.show()

elif chart_type == 'film':
    # ç”µå½±ç¥¨æˆ¿æ•°æ®
    films = ["å“ªå’ä¹‹é­”ç«¥é™ä¸–", "æµæµªåœ°çƒ", "å¤ä»‡è€…è”ç›Ÿ4"]
    box_office = [48.57, 46.18, 42.05]
    
    plt.figure(figsize=(12, 8))
    plt.barh(films, box_office, color='${data.settings.primaryColor}')
    plt.xlabel('ç¥¨æˆ¿(äº¿å…ƒ)')
    plt.title('ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ')
    plt.tight_layout()
    plt.show()`;
            
            // JavaScriptä»£ç 
            javascriptCode.textContent = `// ä½¿ç”¨Plotly.jsåˆ›å»ºäº¤äº’å¼å›¾è¡¨
const chartData = ${JSON.stringify(data.data, null, 2)};

// æ ¹æ®å›¾è¡¨ç±»å‹åˆ›å»ºtrace
let traces = [];
if (chartType === 'sine') {
    const trace1 = {
        x: chartData.x,
        y: chartData.y1,
        type: 'scatter',
        mode: 'lines+markers',
        name: 'æ­£å¼¦æ›²çº¿',
        line: {
            color: '${data.settings.primaryColor}',
            width: ${data.settings.lineWidth}
        },
        marker: {
            size: ${data.settings.markerSize}
        }
    };
    
    const trace2 = {
        x: chartData.x,
        y: chartData.y2,
        type: 'scatter',
        mode: 'lines+markers',
        name: 'ä½™å¼¦æ›²çº¿',
        line: {
            color: '${data.settings.secondaryColor}',
            width: ${data.settings.lineWidth}
        }
    };
    traces = [trace1, trace2];
}

// é…ç½®å¸ƒå±€
const layout = {
    title: '${data.settings.chartTitle}',
    xaxis: { title: '${data.settings.xLabel}' },
    yaxis: { title: '${data.settings.yLabel}' },
    hovermode: 'x unified',
    template: 'plotly_white',
    showlegend: true
};

// åˆ›å»ºå›¾è¡¨
Plotly.newPlot('chart', traces, layout, {responsive: true});`;
            
            // JSONæ ¼å¼
            jsonFormat.textContent = JSON.stringify(data, null, 2);
            
            // ä¼˜åŒ–å»ºè®®
            optimizationTips.innerHTML = `
                <li>å¢åŠ æ•°æ®ç‚¹å¯ä»¥æé«˜å›¾è¡¨çš„ç²¾ç¡®åº¦</li>
                <li>è°ƒæ•´çº¿æ¡å®½åº¦å¯ä»¥æ”¹å–„è§†è§‰æ•ˆæœ</li>
                <li>ä¼˜åŒ–é¢œè‰²æ­é…å¢å¼ºå¯è¯»æ€§</li>
                <li>è€ƒè™‘æ·»åŠ åŠ¨ç”»æ•ˆæœæå‡ç”¨æˆ·ä½“éªŒ</li>
                <li>å®šæœŸæ¸…ç†ç¼“å­˜ä»¥ä¿æŒæ€§èƒ½</li>
            `;
            
            // å¯è§†åŒ–å»ºè®®
            visualizationTips.innerHTML = `
                <li>é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹å±•ç¤ºæ•°æ®</li>
                <li>ä¿æŒé¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆå¯è®¿é—®æ€§æ ‡å‡†</li>
                <li>æ·»åŠ é€‚å½“çš„æ ‡ç­¾å’Œè¯´æ˜æ–‡å­—</li>
                <li>æ§åˆ¶æ•°æ®å¯†åº¦é¿å…è§†è§‰æ··ä¹±</li>
                <li>ä½¿ç”¨ä¸€è‡´çš„è§†è§‰é£æ ¼</li>
            `;
            
            // æ€§èƒ½ä¼˜åŒ–
            performanceTips.innerHTML = `
                <li>å¯¹å¤§æ•°æ®é›†è¿›è¡Œé‡‡æ ·æ˜¾ç¤º</li>
                <li>ä½¿ç”¨WebGLåŠ é€Ÿæ¸²æŸ“</li>
                <li>å®ç°æ‡’åŠ è½½æœºåˆ¶</li>
                <li>ä¼˜åŒ–æ•°æ®å¤„ç†ç®—æ³•</li>
                <li>åˆç†ä½¿ç”¨å†…å­˜é¿å…æ³„æ¼</li>
            `;
        }

        // ä¸‹è½½å›¾è¡¨
        function downloadChart(chartId = 'chart1') {
            const format = document.getElementById('exportFormat').value;
            const width = parseInt(document.getElementById('exportWidth').value);
            const height = parseInt(document.getElementById('exportHeight').value);
            
            Plotly.downloadImage(chartId, {
                format: format,
                width: width,
                height: height,
                filename: `chart_${chartId}_${Date.now()}`
            });
            
            showNotification(`å›¾è¡¨å·²ä¸‹è½½ä¸º${format.toUpperCase()}æ ¼å¼ï¼`, 'success');
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const exportConfig = {
                chartType: currentChartType,
                theme: currentTheme,
                settings: {
                    chartTitle: document.getElementById('chartTitle').value,
                    xLabel: document.getElementById('xLabel').value,
                    yLabel: document.getElementById('yLabel').value,
                    pointCount: document.getElementById('pointCount').value,
                    lineWidth: document.getElementById('lineWidth').value,
                    markerSize: document.getElementById('markerSize').value,
                    showGrid: document.getElementById('showGrid').value,
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    opacity: document.getElementById('opacity').value
                },
                chartData: chartData,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportConfig, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `chart_config_${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('é…ç½®å·²å¯¼å‡ºï¼', 'success');
        }

        // é‡ç½®å…¨éƒ¨
        function resetAll() {
            // é‡ç½®æ‰€æœ‰è¾“å…¥åˆ°é»˜è®¤å€¼
            document.getElementById('chartType').value = 'sine';
            document.getElementById('dataScale').value = 'medium';
            document.getElementById('lineWidth').value = 2;
            document.getElementById('markerSize').value = 6;
            document.getElementById('chartTitle').value = 'æ•°æ®å¯è§†åŒ–å›¾è¡¨';
            document.getElementById('xLabel').value = 'Xè½´';
            document.getElementById('yLabel').value = 'Yè½´';
            document.getElementById('pointCount').value = 100;
            document.getElementById('showGrid').value = 'true';
            document.getElementById('primaryColor').value = '#3b82f6';
            document.getElementById('secondaryColor').value = '#10b981';
            document.getElementById('opacity').value = 80;
            
            // é‡ç½®ä¸»é¢˜
            changeTheme('default');
            updateChart();
            
            showNotification('å·²é‡ç½®åˆ°é»˜è®¤è®¾ç½®ï¼', 'info');
        }

        // åˆ·æ–°å•ä¸ªå›¾è¡¨
        function refreshChart(chartId) {
            createChart(chartId);
            showNotification(`${chartId === 'chart1' ? 'ä¸»å›¾è¡¨' : 'å¯¹æ¯”å›¾è¡¨'}å·²åˆ·æ–°ï¼`, 'info');
        }

        // é€šçŸ¥åŠŸèƒ½
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</span>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // æ·»åŠ æ»‘å‡ºåŠ¨ç”»
        const slideOutStyle = document.createElement('style');
        slideOutStyle.textContent = `
            @keyframes slideOut {
                from { 
                    transform: translateX(0); 
                    opacity: 1; 
                }
                to { 
                    transform: translateX(100%); 
                    opacity: 0; 
                }
            }
        `;
        document.head.appendChild(slideOutStyle);

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                updateChart();
            } else if (e.key === 'r' && e.ctrlKey) {
                e.preventDefault();
                randomizeData();
            } else if (e.key === 'f' && e.ctrlKey) {
                e.preventDefault();
                openFullscreen('chart1');
            } else if (e.key === 'e' && e.ctrlKey) {
                e.preventDefault();
                exportData();
            } else if (e.key === 'd' && e.ctrlKey) {
                e.preventDefault();
                downloadChart();
            } else if (e.key === 'Escape') {
                closeFullscreen();
                closeModal();
            }
        });

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°æ¸²æŸ“å›¾è¡¨
        window.addEventListener('resize', function() {
            const charts = ['chart1', 'chart2', 'fullscreenChart'];
            charts.forEach(chartId => {
                const chartElement = document.getElementById(chartId);
                if (chartElement && chartElement.children.length > 0) {
                    Plotly.Plots.resize(chartElement);
                }
            });
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('analysisModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateChart();
            updateSliderValues();
            showNotification('æ¬¢è¿ä½¿ç”¨å®Œæ•´æ•°æ®å¯è§†åŒ–å¹³å°ï¼', 'info');
            
            // æ·»åŠ åŠ è½½åŠ¨ç”»
            document.querySelectorAll('.chart-container').forEach(container => {
                container.style.animation = 'fadeIn 0.5s ease';
            });
        });

        // é˜²æ­¢åŒå‡»é€‰ä¸­æ–‡æœ¬
        document.addEventListener('selectstart', function(e) {
            if (e.target.closest('.chart-container')) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>